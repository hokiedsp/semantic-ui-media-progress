!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);!function(e,t,n,r){void 0!==(t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")())&&t.Math==Math||("undefined"!=typeof self&&self.Math==Math?self:Function("return this")());e.fn.mediaProgress=function(n){var r,a=arguments[0],i="string"==typeof a,o=[].slice.call(arguments,1);return this.each(function(){var d,s,u=e.isPlainObject(n)?e.extend(!0,{},e.fn.mediaProgress.settings,n):e.extend({},e.fn.mediaProgress.settings),m=u.metadata,l=u.namespace,c=u.selector,f=u.error,p="."+(l=u.namespace),v="module-"+l,g=".media-"+l,b=this,h=e(this),k=h.data(v),M=e(this).find(c.bar),y=e(this).find(c.cursor),T=null,P=!1,j=!1;const C=e=>{let t=T[0];return e<0?e=0:e>t.duration&&(e=t.duration),e/t.duration*b.clientWidth},x=t=>{return"string"==typeof t?s.get.marker.$(t):t instanceof HTMLElement?e(t):"number"==typeof t?h.find(".marker").slice(t,t+1):t instanceof jQuery&&t.hasClass("marker")?t:(s.verbose("Invalid marker id given:",t),e())};s={initialize:function(){s.debug("Initializing media progress bar",u);let t={duration:250,autoSuccess:!1,showActivity:!1,precision:100};h.progress(e.isPlainObject(t)?e.extend(!0,t,n):t),h.addClass("disabled"),y.addClass("hide"),s.read.metadata(),s.read.settings(),s.bind.events(),s.instantiate()},instantiate:function(){s.verbose("Storing instance of mediaProgress",s),k=s,h.data(v,s)},destroy:function(){s.verbose("Destroying previous mediaProgress for",h),h.progress("destroy"),s.detach(),h.removeData(v),k=void 0},attach:function(t){if(T&&s.detach(t),t){if("string"==typeof t||t instanceof HTMLMediaElement)t=e(t);else if(!(t instanceof jQuery))throw"Argument must be id string, DOM HTMLMediaElement, or jQuery object.";if(!(t=t.filter((e,t)=>t instanceof HTMLMediaElement).first()))throw"Argument must contain at least one DOM HTMLMediaElement.";T=t,s.bind.mediaEvents(),s.debug("Attached to",T[0]),T[0].currentSrc&&(s.debug("Media already loaded",T[0]),h.removeClass("disabled"),s.set.marker.time(0))}},detach:function(){T&&(s.debug("Detached from",T[0]),T.off(g),T=null)},goto:{nextMarker:()=>{let e=T[0],t=s.find.nextMarkedTime(e.currentTime);return!!t&&(e.currentTime=t,!0)},prevMarker:()=>{let e=T[0],t=s.find.prevMarkedTime(e.currentTime);return!!t&&(e.currentTime=t,!0)}},find:{nextMarkedTime:e=>null!=(e=[...h.children(".marker")].map(e=>Number(e.getAttribute("data-time"))).sort().find(t=>t>e))?e:null,prevMarkedTime:e=>null!=(e=[...h.children(".marker")].map(e=>Number(e.getAttribute("data-time"))).sort().reverse().find(t=>t<e))?e:null},add:{marker:function(t={}){s.debug("Adding a marker:",t);let n=e('<div class="marker" data-time=0><button>'+(t.iconHTML?t.iconHTML:u.defaultMarkerIconHTML)+"</button></div>");return h.append(n),t.id&&n.attr("id",t.id),t.class&&n.addClass(t.class),t.color&&n.addClass(t.color),t.position&&n.addClass(t.position),"top"==t.position||t.iconHTML||n.find("button>i").addClass("vertically flipped"),t.tooltip&&(n.attr("data-tooltip",t.tooltip),n.attr("data-variation","tiny"),n.hasClass("top")&&n.attr("data-position","bottom center")),t.time&&T&&isFinite(T[0].duration)&&s.set.marker.time(n,t.time),s.debug("Marker created:",n),u.onMarkerAdded(Number(n.data("time")),n),n}},remove:{marker:e=>{let t=h.find(".marker").filter(e);if(t.length<1)return;let n=Number(t.data("time"));t.remove(),s.debug("Marker removed:",t),u.onMarkerRemoved(n,t)}},get:{media:function(){return s.$media[0]},marker:{$:e=>e?h.find(".marker").filter(e):h.find(".marker"),count:()=>h.find(".marker").length,time:e=>e?x(e).data("time"):h.find(".marker").data("time")}},set:{media:function(e){s.attach(e)},barWidth:function(e){h.progress("set barWidth",e)},marker:{time:(e,t)=>{let n;s.debug("set marker time arguments:",e,t),n=arguments.length>1?x(e):h.find(".marker");let r=T[0];n.css("left",C(t)+"px"),s.debug("set marker time data to: ",t<0?0:t>r.duration?r.duration:t),n.attr("data-time",t<0?0:t>r.duration?r.duration:t),s.debug("marker time data: ",n.data("time"))}}},read:{metadata:function(){var e={media:h.data(m.media)};e.media&&(s.debug("Attaching the media element specified by:",e.media),s.attach(e.media))},settings:function(){if(void 0!==u.media){s.debug("Attaching the media element specified by:",u.media);try{s.attach(u.media)}catch(e){u.media=null,s.error(e,u.media)}}}},bind:{events:function(){s.bind.mouseEvents()},touchEvents:function(){},keyboardEvents:function(){},inputEvents:function(){},mouseEvents:function(){s.verbose("Binding mouse events"),h.on("mousedown"+p,s.event.mousedown).on("mousedown"+p,".marker",s.event.marker.mousedown),M.on("mouseenter"+p,s.event.bar.mouseenter).on("mouseleave"+p,s.event.bar.mouseleave)},mediaEvents:()=>{s.verbose("Binding media events"),T.on("loadedmetadata"+g,s.event.media.loadedmetadata).on("loadeddata"+g,s.event.media.loadeddata).on("loadedmetadata"+g,s.event.media.loadedmetadata).on("emptied"+g,s.event.media.emptied).on("timeupdate"+g,s.event.media.timeupdate)}},event:{media:{loadedmetadata:()=>{s.debug("Attached media loaded metadata"),h.progress("set total",T[0].duration),h.progress("update progress",0),s.set.marker.time(0)},loadeddata:()=>{s.debug("Attached media loaded data",h),h.removeClass("disabled"),h.progress("update progress",T[0].currentTime)},emptied:()=>{s.debug("Attached media emptied data",h),h.addClass("disabled"),y.addClass("hide"),h.progress("update progress",0)},timeupdate:()=>{h.progress("update progress",T[0].currentTime)}},bar:{mouseenter:e=>{y.removeClass("hide")},mouseleave:e=>{y.addClass("hide")}},marker:{mousedown:t=>{d=e(t.target).closest(".marker")}},mousedown:n=>{if(0==n.originalEvent.button){let r=T[0];(P=!r.paused)&&r.pause(),y.addClass("grabbed"),j=M.css("transition-duration"),M.css("transition-duration","0s"),e(t).on("mousemove",s.event.mousemove).on("mouseup",s.event.mouseup),s.event.mousemove(n)}n.stopPropagation()},mousemove:e=>{let t=(e=>{let t=e/b.clientWidth;return t<0?t=0:t>1&&(t=1),(T[0].duration*t).toFixed(3)})(e.originalEvent.pageX-(e=>e.getBoundingClientRect().left)(b));if(h.progress("update progress",t),T[0].currentTime=t,d){const e=d.data("time");d.attr("data-time",t),d.css("left",C(t)+"px"),u.onMarkerMove(t,e,d)}},mouseup:n=>{e(t).off("mousemove",s.event.mousemove).off("mouseup",s.event.mouseup),y.removeClass("grabbed"),M.css("transition-duration",j),d&&(d=null),P&&T[0].play()}},setting:function(t,n){s.debug("Changing setting",t,n);let r=h.progress("setting",t,n);return void 0===r&&(e.isPlainObject(t)?e.extend(!0,u,t):void 0!==n?e.isPlainObject(u[t])?e.extend(!0,u[t],n):u[t]=n:r=u[t]),r},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,s,t);else{if(void 0===n)return s[t];s[t]=n}},debug:function(){!u.silent&&u.debug&&(s.debug=Function.prototype.bind.call(console.info,console,u.name+":"),s.debug.apply(console,arguments))},verbose:function(){!u.silent&&u.verbose&&u.debug&&(s.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),s.verbose.apply(console,arguments))},error:function(){u.silent||(s.error=Function.prototype.bind.call(console.error,console,u.name+":"),s.error.apply(console,arguments))},invoke:function(t,n,a){var i,d,u,m=k;return n=n||o,a=b||a,"string"==typeof t&&void 0!==m&&(t=t.split(/[\. ]/),i=t.length-1,e.each(t,function(n,r){var a=n!=i?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(m[a])&&n!=i)m=m[a];else{if(void 0!==m[a])return d=m[a],!1;if(!e.isPlainObject(m[r])||n==i)return void 0!==m[r]?(d=m[r],!1):(s.error(f.method,t),!1);m=m[r]}})),e.isFunction(d)?u=d.apply(a,n):void 0!==d&&(u=d),e.isArray(r)?r.push(u):void 0!==r?r=[r,u]:void 0!==u&&(r=u),d}},i?(void 0===k&&s.initialize(),s.invoke(a)):(void 0!==k&&k.invoke("destroy"),s.initialize())}),void 0!==r?r:this},e.fn.mediaProgress.settings={name:"Media Progress",namespace:"mediaProgress",silent:!1,debug:!1,verbose:!1,defaultMarkerIconHTML:'<i class="fitted marker icon"></i>',onMarkerMove:function(e,t,n){},onMarkerAdded:function(e,t){},onMarkerRemoved:function(e,t){},metadata:{media:"media"},selector:{bar:"> .bar",cursor:"> .bar > .cursor"}}}(jQuery,window,document)},function(e,t,n){}]);