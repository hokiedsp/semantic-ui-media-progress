!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);!function(e,t,n,i){void 0!==(t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")())&&t.Math==Math||("undefined"!=typeof self&&self.Math==Math?self:Function("return this")());e.fn.mediaProgress=function(n){var i,o=arguments[0],a="string"==typeof o,r=[].slice.call(arguments,1);return this.each(function(){var s,d,u=e.isPlainObject(n)?e.extend(!0,{},e.fn.mediaProgress.settings,n):e.extend({},e.fn.mediaProgress.settings),l=u.metadata,c=u.namespace,m=u.selector,f=u.error,p="."+(c=u.namespace),v="module-"+c,g=".media-"+c,b=this,h=e(this),y=h.data(v),M=e(this).find(m.bar),P=e(this).find(m.cursor),j=null,O=!1,k=!1;d={initialize:function(){d.debug("Initializing media progress bar",u),d.read.metadata(),d.read.settings();let t={duration:250,autoSuccess:!1,showActivity:!1,precision:100};h.progress(e.isPlainObject(t)?e.extend(!0,t,n):t),h.addClass("disabled"),P.addClass("hide"),d.bind.events(),d.instantiate()},instantiate:function(){d.verbose("Storing instance of mediaProgress",d),y=d,h.data(v,d)},destroy:function(){d.verbose("Destroying previous mediaProgress for",h),h.progress("destroy"),d.detach(),h.removeData(v),y=void 0},attach:function(t){if(j&&d.detach(t),t){if("string"==typeof t||t instanceof HTMLMediaElement)t=e(t);else if(!(t instanceof jQuery))throw"Argument must be id string, DOM HTMLMediaElement, or jQuery object.";if(!(t=t.filter((e,t)=>t instanceof HTMLMediaElement).first()))throw"Argument must contain at least one DOM HTMLMediaElement.";j=t,d.bind.mediaEvents(),d.debug("Attached to",j[0])}},detach:function(){j&&(d.debug("Detached from",j[0]),j.off(g),j=null)},add:{marker:function(t={}){if(d.debug("Adding a marker:",t),s=e('<div class="marker"><button>'+(t.iconHTML?t.iconHTML:u.defaultMarkerIconHTML)+"</button></div>"),h.append(s),t.id&&s.attr("id",t.id),t.color&&s.addClass(t.color),t.position&&s.addClass(t.position),"top"==t.position||t.iconHTML||s.find("button>i").addClass("vertically flipped"),t.tooltip&&(s.attr("data-tooltip",t.tooltip),s.attr("data-variation","tiny"),s.hasClass("top")&&s.attr("data-position","bottom center")),j){let e=j[0];if(t.time&&isFinite(e.duration)){let n=(t.time<0?0:t.time>e.duration?e.duration:t.time).toFixed(3);s.attr("data-time",n),s.css("left",(100*(n-e.duration)/e.duration).toFixed(2)+"%")}}return d.debug("Marker created:",s),s}},get:{media:function(){return d.$media[0]}},set:{media:function(e){d.attach(e)},barWidth:function(e){h.progress("set barWidth",e)}},read:{metadata:function(){var e={media:h.data(l.media)};e.media&&(d.debug("Attaching the media element specified by:",e.media),d.attach(e.media))},settings:function(){if(void 0!==u.media){d.debug("Attaching the media element specified by:",u.media);try{d.attach(u.media)}catch(e){u.media=null,d.error(e,u.media)}}}},bind:{events:function(){d.bind.mouseEvents()},touchEvents:function(){},keyboardEvents:function(){},inputEvents:function(){},mouseEvents:function(){d.verbose("Binding mouse events"),h.on("mousedown"+p,d.event.mousedown).on("mousedown"+p,".marker",d.event.marker.mousedown),M.on("mouseenter"+p,d.event.bar.mouseenter).on("mouseleave"+p,d.event.bar.mouseleave)},mediaEvents:()=>{d.verbose("Binding media events"),j.on("loadedmetadata"+g,d.event.media.loadedmetadata).on("loadeddata"+g,d.event.media.loadeddata).on("loadedmetadata"+g,d.event.media.loadedmetadata).on("emptied"+g,d.event.media.emptied).on("timeupdate"+g,d.event.media.timeupdate)}},event:{media:{loadedmetadata:()=>{h.progress("set total",j[0].duration),h.progress("update progress",0)},loadeddata:()=>{h.removeClass("disabled"),h.progress("update progress",j[0].currentTime)},emptied:()=>{h.addClass("disabled"),P.addClass("hide"),h.progress("update progress",0)},timeupdate:()=>{h.progress("update progress",j[0].currentTime)}},bar:{mouseenter:e=>{P.removeClass("hide")},mouseleave:e=>{P.addClass("hide")}},marker:{mousedown:t=>{s=e(t.target).closest(".marker")}},mousedown:n=>{if(console.log(n.originalEvent.button),0==n.originalEvent.button){let i=j[0];(O=!i.paused)&&i.pause(),P.addClass("grabbed"),k=M.css("transition-duration"),M.css("transition-duration","0s"),e(t).on("mousemove",d.event.mousemove).on("mouseup",d.event.mouseup),d.event.mousemove(n)}n.stopPropagation()},mousemove:e=>{let t=j[0],n=(e.originalEvent.pageX-(e=>{var t=0;if(e.offsetParent)do{t+=e.offsetLeft}while(e=e.offsetParent);return t})(b))/b.clientWidth,i=(t.duration*n).toFixed(3);h.progress("update progress",i),t.currentTime=i,s&&(s.attr("data-time",t.currentTime),s.css("left",(100*n).toFixed(2)+"%"))},mouseup:n=>{e(t).off("mousemove",d.event.mousemove).off("mouseup",d.event.mouseup),P.removeClass("grabbed"),M.css("transition-duration",k),s&&(s=null),O&&j[0].play()}},setting:function(t,n){d.debug("Changing setting",t,n);let i=h.progress("setting",t,n);return void 0===i&&(e.isPlainObject(t)?e.extend(!0,u,t):void 0!==n?e.isPlainObject(u[t])?e.extend(!0,u[t],n):u[t]=n:i=u[t]),i},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(void 0===n)return d[t];d[t]=n}},debug:function(){!u.silent&&u.debug&&(d.debug=Function.prototype.bind.call(console.info,console,u.name+":"),d.debug.apply(console,arguments))},verbose:function(){!u.silent&&u.verbose&&u.debug&&(d.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),d.verbose.apply(console,arguments))},error:function(){u.silent||(d.error=Function.prototype.bind.call(console.error,console,u.name+":"),d.error.apply(console,arguments))},invoke:function(t,n,o){var a,s,u,l=y;return n=n||r,o=b||o,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,i){var o=n!=a?i+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[o])&&n!=a)l=l[o];else{if(void 0!==l[o])return s=l[o],!1;if(!e.isPlainObject(l[i])||n==a)return void 0!==l[i]?(s=l[i],!1):(d.error(f.method,t),!1);l=l[i]}})),e.isFunction(s)?u=s.apply(o,n):void 0!==s&&(u=s),e.isArray(i)?i.push(u):void 0!==i?i=[i,u]:void 0!==u&&(i=u),s}},a?(void 0===y&&d.initialize(),d.invoke(o)):(void 0!==y&&y.invoke("destroy"),d.initialize())}),void 0!==i?i:this},e.fn.mediaProgress.settings={name:"Media Progress",namespace:"mediaProgress",silent:!1,debug:!1,verbose:!1,defaultMarkerIconHTML:'<i class="fitted marker icon"></i>',metadata:{media:"media"},selector:{bar:"> .bar",cursor:"> .bar > .cursor"}}}(jQuery,window,document)},function(e,t,n){}]);